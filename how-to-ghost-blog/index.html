<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <script>
        // UNCOMMENT AND USE YOUR VARIABLES FOR DISQUS AND GOOGLE ANALYTICS
        // var d_id  = '',
        //     g_id  = 'UA-XXXXXXXX-X', // Format: UA-########-#, Example: UA-11220899-1
        //     g_url = 'XXXXXXX.XXX' // Format: #####.####, Example: webdesignporto.com
    </script>

    <title>Welcome Back &amp; How to Run a Ghost Blog for Free</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/highlighter/prettify.css?v=2f125e8a2a" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css?v=2f125e8a2a" />

    <link rel="icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://blog.rootshellz.com/how-to-ghost-blog/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://blog.rootshellz.com/how-to-ghost-blog/amp/" />
    
    <meta property="og:site_name" content="rootshellz" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Welcome Back &amp; How to Run a Ghost Blog for Free" />
    <meta property="og:description" content="Welcome Back to the rootshellz blogHello world! It&#x27;s been quiet some time since I&#x27;ve put any effort at all into this blog. However, I still enjoy writing about new things I am learning about and experimenting with, so I figure it&#x27;s time I revive the rootshellz blog! My main interest" />
    <meta property="og:url" content="https://blog.rootshellz.com/how-to-ghost-blog/" />
    <meta property="og:image" content="https://blog.rootshellz.com/content/images/2021/02/Screen-Shot-2021-02-14-at-5.30.09-PM.png" />
    <meta property="article:published_time" content="2021-02-14T00:00:00.000Z" />
    <meta property="article:modified_time" content="2021-02-15T00:31:40.000Z" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Welcome Back &amp; How to Run a Ghost Blog for Free" />
    <meta name="twitter:description" content="Welcome Back to the rootshellz blogHello world! It&#x27;s been quiet some time since I&#x27;ve put any effort at all into this blog. However, I still enjoy writing about new things I am learning about and experimenting with, so I figure it&#x27;s time I revive the rootshellz blog! My main interest" />
    <meta name="twitter:url" content="https://blog.rootshellz.com/how-to-ghost-blog/" />
    <meta name="twitter:image" content="https://blog.rootshellz.com/content/images/2021/02/Screen-Shot-2021-02-14-at-5.30.09-PM.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="rootshellz" />
    <meta name="twitter:site" content="@rootshellz" />
    <meta name="twitter:creator" content="@rootshellz" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="401" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "rootshellz",
        "url": "https://blog.rootshellz.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.rootshellz.com/content/images/2018/07/Blog-Logo.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "rootshellz",
        "image": {
            "@type": "ImageObject",
            "url": "https://blog.rootshellz.com/content/images/2018/07/rootshellz.jpg",
            "width": 1630,
            "height": 1631
        },
        "url": "https://blog.rootshellz.com/author/rootshellz/",
        "sameAs": [
            "https://twitter.com/rootshellz"
        ]
    },
    "headline": "Welcome Back &amp; How to Run a Ghost Blog for Free",
    "url": "https://blog.rootshellz.com/how-to-ghost-blog/",
    "datePublished": "2021-02-14T00:00:00.000Z",
    "dateModified": "2021-02-15T00:31:40.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://blog.rootshellz.com/content/images/2021/02/Screen-Shot-2021-02-14-at-5.30.09-PM.png",
        "width": 2000,
        "height": 401
    },
    "description": "Welcome Back to the rootshellz blog\nHello world! It&#x27;s been quiet some time since I&#x27;ve put any effort at all into\nthis blog. However, I still enjoy writing about new things I am learning about\nand experimenting with, so I figure it&#x27;s time I revive the rootshellz\n[https://blog.rootshellz.com/] blog! My main interest is still security, so the\ncontent will mostly be related, but there will also be general\ntechnology-related content as well, such as this article.\n\nThe Problem\nThere is no shortage of ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.rootshellz.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.36" />
    <link rel="alternate" type="application/rss+xml" title="rootshellz" href="https://blog.rootshellz.com/rss/" />
    <!-- https://www.jsdelivr.com/package/npm/prism-themes?path=themes -->
<!-- These three work together / are additive -->
<link href="https://cdn.jsdelivr.net/npm/prism-themes@1.5.0/themes/prism-synthwave84.css" rel="stylesheet" / >
<link href="https://cdn.jsdelivr.net/npm/prism-themes@1.5.0/themes/prism-vsc-dark-plus.css" rel="stylesheet" / >
<link href="https://cdn.jsdelivr.net/npm/prism-themes@1.5.0/themes/prism-xonokai.css" rel="stylesheet" / >


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TM0JKQZ7H1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TM0JKQZ7H1');
</script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', g_id, g_url);
      ga('send', 'pageview');

    </script>
</head>
<body class="post-template">

    

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <a id="blog-logo" href="https://blog.rootshellz.com">
                    <img src="/content/images/2018/07/Blog-Logo.png" alt="Blog Logo" />
            </a>
        </header>


        <span class="post-meta"><time datetime="2021-02-13">13 Feb 2021</time> </span>

        <h1 class="post-title">Welcome Back &amp; How to Run a Ghost Blog for Free</h1>

        <section class="post-content">
            <h2 id="welcome-back-to-the-rootshellz-blog">Welcome Back to the rootshellz blog</h2><p>Hello world! It's been quiet some time since I've put any effort at all into this blog. However, I still enjoy writing about new things I am learning about and experimenting with, so I figure it's time I revive the <strong><a href="https://blog.rootshellz.com/">rootshellz</a></strong> blog! My main interest is still security, so the content will mostly be related, but there will also be general technology-related content as well, such as this article.</p><h2 id="the-problem">The Problem</h2><p>There is no shortage of blogging platforms these days. There are fully managed solutions ranging from the free <a href="https://wordpress.com/">WordPress.com</a> and <a href="https://medium.com/">Medium.com</a>, to ad-supported <a href="https://www.wix.com/">Wix.com</a>, to paid premium managed platforms like <a href="https://wordpress.org/">Wordpress.org</a> and <a href="https://ghost.org/">Ghost.org</a>. There's also the "old-school" more hands-on method of self-hosting a blog. Many of the same services offering hosted solutions also offer their software for use on self-hosted sites. This includes Wordpress and my personal favorite, <a href="https://github.com/TryGhost/Ghost">Ghost</a>.</p><p>What if, like me, you want the flexibility of a self-hosted solution, <em>without</em> the cost of a managed solution, but <em>with</em> the high-availability and reliability of a paid-platform? That would certainly be too much to ask for, right? Not so fast!</p><h2 id="the-solution">The Solution</h2><p>In the rest of this article, I will outline how I use a local version of the open-source version of <a href="https://github.com/TryGhost/Ghost">Ghost</a> in conjunction with <a href="https://www.docker.com/">Docker</a> and <a href="https://github.com/Fried-Chicken">Mr Mo's</a> <a href="https://github.com/Fried-Chicken/ghost-static-site-generator">ghost-static-site-generator</a> to produce a static blog that is hosted for free using <a href="https://pages.github.com/">GitHub Pages</a> and then add the ability to comment using <a href="https://disqus.com/">Disqus</a>, another free service. The result is <a href="https://blog.rootshellz.com/">this blog</a> that you are reading right now!</p><h2 id="motivation">Motivation</h2><p>So why use this method?</p><h3 id="pros">Pros</h3><ul><li>Free. You can run a blog (or website) with nothing out of pocket. Add a few dollars a year if you want to have your own domain.</li><li>Minimal upkeep. No OS or web server to patch; No node.js to update; etc.</li><li>Minimal attack surface. No web server to accidentally misconfigure, no outdated software to forget to patch, no dynamic content requiring potentially vulnerable backend code, and no database to steal data from or insert malicious code into. (Caveat: this is <em>assuming</em> GitHub does it's part, but they have a great reputation.)</li><li>Site will theoretically be as highly-available and scalable as GitHub.com itself.</li></ul><h3 id="cons">Cons</h3><ul><li><em>Everything</em> published is public, for (mostly) forever. Since the entire site is hosted within a GitHub repository, even removed content will exist within the commit history. The exception here is if you delete the repo and re-create it with fresh history, which is totally possible, but not documented here.</li><li>You lose all dynamic features like default commenting systems, user registration and related functionality, and scheduling publication of posts in the future. You will have no dynamic backend. If you really need features like these, this is probably not the best setup for your blog or site.</li><li>You are at the mercy of GitHub. If the site goes down, there is nothing you can do. There is also a risk that GitHub discontinues or otherwise changes their pages offering or ToS.</li><li>No access control. You can't limit your site to only certain users or IP addresses.</li></ul><h2 id="how-to-ghost-tutorial">How to Ghost Tutorial</h2><p>Let me first say, there are multiple way to accomplish this end result, including using platforms other than Ghost, but this is the way I do it and it work for me. I have updated this process with slight variations over the years.</p><h3 id="components">Components</h3><ul><li><a href="https://github.com/TryGhost/Ghost">Ghost</a> - Free-to-use, open-source blogging platform written in node.js. This is the tool that will allow us to actually manage our blog and publish new articles and content.</li><li><a href="https://www.docker.com/">Docker</a> - Container-based virtualization platform. This will allow us to easily run some necessary tools locally, without worrying about mucking up our local environment.</li><li><a href="https://github.com/Fried-Chicken">Mr Mo's</a> <a href="https://github.com/Fried-Chicken/ghost-static-site-generator">ghost-static-site-generator</a> - This is a tool that will "freeze" our locally hosted Ghost blog, converting it from a local-only dynamic blog to a set of static assets that we can deploy to a website hosting platform.</li><li><a href="https://pages.github.com/">GitHub Pages</a> - This allows us to host our blog for free on <a href="https://github.com/">GitHub.com</a> by deploying out static assets to a properly configured git repository. This gives our site all the reliability of GitHub. It also means we get some freebies like managed TLS including a free CA-signed certificate, although since our site is static, this is mostly for the lolz.</li><li><a href="https://disqus.com/">Disqus</a> - A free-to-use comment system that is popular across the Internet. Users with a Disqus account will be able to comment on pages on our site. (Scroll to the bottom of this article and leave a comment using Disqus now!)</li><li>Optionally, you also can use a custom domain name purchased from your choice or providers. My registrar of choice is <a href="https://www.namecheap.com/">Namecheap</a>.</li></ul><h3 id="process">Process</h3><p>This is the process I use to run this blog:</p><p>First of all, you will need <em>two</em> GitHub.com repositories. One <em>private</em> repository to hold your actual Ghost site database and assets, for local editing. I call this repo <code>blog.rootshellz.com</code>. <strong>This repo should remain <em>private</em>. </strong>The second repo should be <em>public</em> and configured for GitHub pages. I call this repo <code>rootshellz.github.io</code>.</p><p>To set up the public repository to be served by GitHub Pages:</p><ol><li>Create the repository (make it public)</li><li>Open the repo in your browser and select <em>Settings. </em></li><li>Scroll down to the GitHub Pages section.</li><li>Select the appropriate branch to enable pages.</li><li>If you have a custom domain name, enter it. (You will also need to add a CNAME to point your domain to GitHub – e.g. <code>blog 300 IN CNAME rootshellz.github.io.</code>)</li><li>Optionally, enable <strong>Enforce HTTPS</strong>. Do it, why not?</li></ol><figure class="kg-card kg-image-card"><img src="https://blog.rootshellz.com/content/images/2021/02/image-1.png" class="kg-image" alt srcset="https://blog.rootshellz.com/content/images/size/w600/2021/02/image-1.png 600w, https://blog.rootshellz.com/content/images/size/w1000/2021/02/image-1.png 1000w, https://blog.rootshellz.com/content/images/size/w1600/2021/02/image-1.png 1600w, https://blog.rootshellz.com/content/images/2021/02/image-1.png 2004w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-image-card"><img src="https://blog.rootshellz.com/content/images/2021/02/image-2.png" class="kg-image" alt srcset="https://blog.rootshellz.com/content/images/size/w600/2021/02/image-2.png 600w, https://blog.rootshellz.com/content/images/size/w1000/2021/02/image-2.png 1000w, https://blog.rootshellz.com/content/images/size/w1600/2021/02/image-2.png 1600w, https://blog.rootshellz.com/content/images/2021/02/image-2.png 1934w" sizes="(min-width: 720px) 720px"></figure><p>From here, it's just a matter of installing Docker and following this workflow:</p><!--kg-card-begin: markdown--><p>Work on the <em>private</em> repo locally:</p>
<ul>
<li>Clone the private, &quot;back-end&quot; repo: e.g. <code>git clone git@github.com:rootshellz/blog.rootshellz.com.git</code>
<ul>
<li>or just <code>git pull</code> from inside of the correct existing directory</li>
</ul>
</li>
<li>Create a new branch for the changes you are going to make: <code>git checkout -b creating_new_post</code></li>
<li>Launch the local Ghost blog via a Docker container with Ghosts's content mapped as a volume:
<ul>
<li><code>docker run -d --name ghost -e url=https://blog.rootshellz.com -p 3001:2368 -v /Path/to/private/repo/blog.rootshellz.com/ghost/content:/var/lib/ghost/content ghost</code> (Replace the mapped path with the correct path to your <em>private</em> repo.)</li>
</ul>
</li>
<li>Once running, you will now be able to view the Ghost site locally and make changes using Ghost UI.
<ul>
<li>Viw your site locally: <a href="https://blog.rootshellz.com">/</a></li>
<li>Access the admin panel to make changes: <a href="https://blog.rootshellz.com/ghost">/ghost</a></li>
</ul>
</li>
<li>After you have made the desired changes, using Ghost's web interface, commit them to the private repo:
<ul>
<li><code>git add -A</code></li>
<li><code>git commit -m &quot;Making some changes&quot;</code></li>
<li><code>git push</code></li>
<li>If you didn't push straight to the master branch, go to GitHub and create a pull request (PR) for the changes and merge into the master branch.</li>
</ul>
</li>
</ul>
<p>Now, we will be syncing the back-end changes to the public repository:</p>
<ul>
<li>Clone the public, GitHub Pages, repo: e.g. <code>git clone git@github.com:rootshellz/rootshellz.github.io.git</code>
<ul>
<li>or just <code>git pull</code> from inside of the correct existing directory</li>
</ul>
</li>
<li>Create a new branch for the changes you are going to sync. These will be your published changes to the public site: <code>git checkout -b creating_new_post</code></li>
<li>Blow everything away: <code>rm -rf /Path/to/public/repo/rootshellz.github.io/*</code>
<ul>
<li>This is required to correctly sync everything, otherwise content removed from your site locally won't be removed on the production site.  Be sure to remove the content inside of the repo (<code>.../*</code>) instead of the repo itself (<code>.../</code>). This should preserve hidden files and directories, importantly including <code>.../.git</code>.</li>
</ul>
</li>
<li>&quot;Freeze&quot; the blog using <a href="https://github.com/Fried-Chicken/ghost-static-site-generator">ghost-static-site-generator</a>.  The tool runs on node.js, so it's easiest to use a Docker container so as to avoid mucking with a local node setup.:
<ul>
<li><code>docker exec -it $(docker run -dt --name gssg --network=&quot;host&quot; -v /Path/to/public/repo/rootshellz.github.io:/ghost_static node /bin/bash) /bin/bash</code> (Replace the mapped path with the correct path to your <em>public</em> repo.)</li>
<li>From inside of the container, run:
<ul>
<li><code>npm install -g ghost-static-site-generator</code></li>
<li><code>gssg --domain https://blog.rootshellz.com --url https://blog.rootshellz.com --dest ghost_static/</code> (Replace the argument after the <code>--url</code> flag with your actual URL.)</li>
<li>Re-add the CNAME: <code>echo your.domain.com &gt; ghost_static/CNAME</code> (e.g. <code>echo blog.rootshellz.com &gt; ghost_static/CNAME</code>)</li>
<li>Exit the container: <code>exit</code></li>
</ul>
</li>
</ul>
</li>
<li>Sync the local changes to the public repository:
<ul>
<li><code>git add -A</code></li>
<li><code>git commit -m &quot;Makeing some changes&quot;</code></li>
<li><code>git push</code></li>
<li>If you didn't push straight to the master branch, go to GitHub and create a pull request (PR) for the changes and merge into the master branch.
<ul>
<li>Any changes merged to the master branch (or whatever branch you defined in the GitHub Pages settings above) will now by <strong>published and live on your site</strong>!</li>
</ul>
</li>
</ul>
</li>
<li>Cleanup the Docker containers:
<ul>
<li><code>docker rm -f ghost</code></li>
<li><code>docker rm -f gssg</code></li>
</ul>
</li>
</ul>
<!--kg-card-end: markdown--><h3 id="comments">Comments</h3><p>The final piece to this puzzle is to add comment functionality to our blog (or site). We do this using Disqus. There are multiple ways to accomplish this, but I followed <a href="https://ghost.org/integrations/disqus/">this method</a> published by Disqus and endorsed by Ghost. Other options involve simply adding Disqus-provided JavaScript to the footer of every page, using Ghost's <strong><em>Code injection </em></strong>functionality.</p><p>Follow <a href="https://ghost.org/integrations/disqus/">these steps</a> using the above process for making changes to your private repo and then syncing them to the public, GitHub pages repo:</p><ul><li><a href="https://disqus.com/profile/signup/?next=https%3A//disqus.com/">Sign up</a> at Disqus and register a new site.</li><li>Copy the Ghost-Disqus comment code (provided by Disqus).</li></ul><pre><code class="language-javascript">&lt;div id="disqus_thread"&gt;&lt;/div&gt;
&lt;script&gt;
    var disqus_config = function () {
        this.page.url = "{{url absolute="true"}}";
        this.page.identifier = "ghost-{{comment_id}}"
    };
    (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://EXAMPLE.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
&lt;/script&gt;
</code></pre><ul><li>Paste the comment code into <code>post.hbs</code> for whatever theme you are running. (For me, this is under <code>/Path/to/private/repo/blog.rootshellz.com/ghost/content/themes/the-shell-master/post.hbs</code>.) Note that some themes may have default Disqus code built in, but I just replace it with the Disqus provided code.</li><li>Replace the example in the line <code>s.src='https://EXAMPLE.disqus.com/embed.js';</code> with <em>your</em> unique Disqus info. (e.g. mine becomes <code>s.src='https://rootshellz.disqus.com/embed.js';</code></li><li>After doing the "sync-to-prod dance" as defined above, you should now see Disqus comment functionality at the bottom of your blog posts.</li></ul><figure class="kg-card kg-image-card"><img src="https://blog.rootshellz.com/content/images/2021/02/image-3.png" class="kg-image" alt srcset="https://blog.rootshellz.com/content/images/size/w600/2021/02/image-3.png 600w, https://blog.rootshellz.com/content/images/size/w1000/2021/02/image-3.png 1000w, https://blog.rootshellz.com/content/images/size/w1600/2021/02/image-3.png 1600w, https://blog.rootshellz.com/content/images/size/w2400/2021/02/image-3.png 2400w" sizes="(min-width: 720px) 720px"></figure><h3 id="conclusion">Conclusion</h3><p>There you have it. Follow this process and you too can easily self-publish a professional quality blog for free using Ghost, GitHub Pages, and Disqus.</p>
        </section>
        
        <div id="disqus_thread"></div>
        <div id="disqus_thread"></div>
        <script>
        var disqus_config = function () {
            this.page.url = "https://blog.rootshellz.com/how-to-ghost-blog/";
            this.page.identifier = "ghost-602729ba913b500001958051"
        };
        (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://rootshellz.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        

        <footer class="post-footer">


            <section class="share">
                <h4>Share this</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Welcome Back &amp; How to Run a Ghost Blog for Free&url=https://blog.rootshellz.com/how-to-ghost-blog/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.rootshellz.com/how-to-ghost-blog/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://blog.rootshellz.com/how-to-ghost-blog/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>


    <footer class="site-footer">
        <!-- <a class="subscribe icon-feed" href="https://blog.rootshellz.com/rss/"><span class="tooltip">Subscribe!</span></a> -->
        <div class="inner">
             <section class="copyright">All content copyright <a href="/">rootshellz</a> &copy; 2021 &bull; All rights reserved.</section>
             <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://ghost.org"><span class="icon-ghost-text">Ghost</span></a> in <a href="https://github.com/mityalebedev/The-Shell">The Shell</a> theme.</section>
        </div>
    </footer>

    <!-- https://cdnjs.com/libraries/prism -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"></script>

    <script type='text/javascript' src="/assets/highlighter/prettify.js?v=2f125e8a2a"></script>
    <script type='text/javascript' src="/assets/js/shell.js?v=2f125e8a2a"></script>
</body>
</html>
